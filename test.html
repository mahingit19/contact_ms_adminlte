<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Advanced Phone Number Validation</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 2em;
      }
      input {
        font-size: 1em;
        padding: 0.3em;
        margin: 0.5em 0;
      }
      button {
        font-size: 1em;
        padding: 0.4em 0.8em;
      }
    </style>
  </head>
  <body>
    <h2>Phone Number Validation</h2>
    <p>
      Allowed formats:
      <br />• International: <code>+8801XXXXXXXXX</code> (14 characters)
      <br />• National (with 0): <code>01XXXXXXXXX</code> (11 digits)
      <br />• Local: <code>1XXXXXXXXX</code> (10 digits)
      <br />• Country code without plus: <code>8801XXXXXXXXX</code> (13 digits)
    </p>
    <form id="phoneForm">
      <label for="phoneInput">Phone Number:</label> <br />
      <input
        type="text"
        id="phoneInput"
        name="phoneInput"
        required
        placeholder="e.g., +8801712345678"
      />
      <br />
      <button type="submit">Submit</button>
    </form>
    <p id="message"></p>

    <script>
      function validatePhoneNumber(number) {
        // Define allowed operator prefixes
        const validOps = ["12", "13", "14", "15", "16", "17", "18", "19"];

        // Case 1: Number with a plus sign – must be international
        if (number.startsWith("+")) {
          if (!number.startsWith("+880")) {
            // Only +880 is allowed if using a country code.
            return false;
          }
          if (number.length !== 14) {
            return false;
          }
          // The part after "+880" must be exactly 10 digits.
          let localPart = number.slice(4);
          if (!/^\d{10}$/.test(localPart)) {
            return false;
          }
          // Check if the first two digits are one of the allowed prefixes.
          let op = localPart.slice(0, 2);
          if (!validOps.includes(op)) {
            return false;
          }
          return true;
        } else {
          // Without a plus sign, we allow three possibilities.

          // Format A: Local number without any country code or leading zero (10 digits)
          if (number.length === 10) {
            if (!/^\d{10}$/.test(number)) return false;
            let op = number.slice(0, 2);
            if (!validOps.includes(op)) return false;
            return true;
          }
          // Format B: National format with leading zero (11 digits)
          else if (number.length === 11) {
            if (!/^0\d{10}$/.test(number)) return false;
            // Remove the leading 0 before checking the operator portion.
            let localPart = number.slice(1);
            let op = localPart.slice(0, 2);
            if (!validOps.includes(op)) return false;
            return true;
          }
          // Format C: Country code without plus (should be "880" + 10 digits) i.e. 13 digits total.
          else if (number.length === 13) {
            if (!/^880\d{10}$/.test(number)) return false;
            // Remove the country code digits ("880") before checking
            let localPart = number.slice(3);
            let op = localPart.slice(0, 2);
            if (!validOps.includes(op)) return false;
            return true;
          }
          // Any other length (notably 12 digits) is not allowed.
          else {
            return false;
          }
        }
      }

      document.getElementById("phoneForm").addEventListener("submit", function (e) {
        e.preventDefault();
        const input = document.getElementById("phoneInput").value.trim();
        const messageEl = document.getElementById("message");

        if (!validatePhoneNumber(input)) {
          messageEl.textContent = "Invalid phone number! Please check the format.";
          messageEl.style.color = "red";
        } else {
          messageEl.textContent = "valid";
          messageEl.style.color = "green";
        }
      });
    </script>
  </body>
</html>


<script>
  $(document).ready(function () {
  function validatePhoneNumber(number) {
    const validOps = ["12", "13", "14", "15", "16", "17", "18", "19"];

    if (number.startsWith("+")) {
      if (!number.startsWith("+880")) {
        return false;
      }
      if (number.length !== 14) {
        return false;
      }
      let localPart = number.slice(4);
      if (!/^\d{10}$/.test(localPart)) {
        return false;
      }
      let op = localPart.slice(0, 2);
      if (!validOps.includes(op)) {
        return false;
      }
      return true;
    } else {
      if (number.length === 10) {
        if (!/^\d{10}$/.test(number)) return false;
        let op = number.slice(0, 2);
        if (!validOps.includes(op)) return false;
        return true;
      } else if (number.length === 11) {
        if (!/^0\d{10}$/.test(number)) return false;
        let localPart = number.slice(1);
        let op = localPart.slice(0, 2);
        if (!validOps.includes(op)) return false;
        return true;
      } else if (number.length === 13) {
        if (!/^880\d{10}$/.test(number)) return false;
        let localPart = number.slice(3);
        let op = localPart.slice(0, 2);
        if (!validOps.includes(op)) return false;
        return true;
      } else {
        return false;
      }
    }
  }

  $("#phoneForm").submit(function (e) {
    e.preventDefault();
    const input = $.trim($("#phoneInput").val());
    const messageEl = $("#message");

    if (validatePhoneNumber(input)) {
      messageEl.text("Valid phone number!").css("color", "green");
    } else {
      messageEl.text("Invalid phone number! Please check the format.").css("color", "red");
    }
  });
});

</script>